module.exports=function(e){function t(){if(n.getValue().length<3)return void Ti.UI.createNotification({message:"Das Suchwort sollte mindestens drei Zeichen lang sein. "}).show();a.darker.show(),a.circleProgress.show();var e={col1:i,a:n.getValue()||"Rauschen",so:"autor",soo:"asc"};require("controls/htmlpost.adapter")({payload:e,onprogress:function(e){a.circleProgress.setValue(e)},onerror:function(){Ti.UI.createNotification({message:"Datenbankserver antwortet zu langsam …\n Einfach nochmals losschicken! "}).show(),a.darker.hide(),a.circleProgress.hide()},onload:function(t){var i=[];if(a.darker.hide(),a.circleProgress.hide(),0==t.length)return void Ti.UI.createNotification({message:"Mehr als 100 Datensätze, formulieren Sie Ihre Anfrage bitte etwas genauer. "}).show();var o=Ti.UI.createWindow({fullscreen:!0,data:t,searchItem:e,backgroundColor:"white"});o.open(),o.list=Ti.UI.createTableView(),o.add(o.list),o.data.forEach(function(e){i.push(require("ui/common/row.widget")(e))}),o.list.setData(i),o.list.addEventListener("click",function(e){require("ui/common/sendung.window")(e.rowData.itemId).open()}),o.addEventListener("open",require("ui/common/search.menu"))}})}var a=Ti.UI.createView();a.circleProgress=require("vendor/circularprogress")({percent:0,size:250,margin:10,zIndex:901,progressColor:"#427aa7",topper:{color:"#fff",size:225},font:{visible:!1}}),a.darker=Ti.UI.createView({backgroundColor:"black",opacity:.5,visible:!1,zIndex:900}),e.add(a),e.add(a.darker),e.add(a.circleProgress);var i="ti",o=Ti.UI.createView({top:30,left:15,height:20,width:200,backgroundColor:"#777"});o.add(Ti.UI.createImageView({image:"/images/d.png",width:10,height:10,right:0,bottom:0}));var r=Ti.UI.createLabel({text:"Hörspiel-Titel",color:"white",left:5,touchEnabled:!1,width:Ti.UI.FILL,textAlign:"left"});o.add(r),a.add(o);var n=Ti.UI.createTextField({borderWidth:1,borderColor:"silver",borderRadius:5,color:"#336699",top:60,left:10,hintText:"Suchbegriff",width:"90%",height:40});a.lupe=Ti.UI.createImageView({image:"/images/lupe.png",width:80,top:45,bubbleParent:!1,height:70,right:5}),a.add(a.lupe);var s=Ti.UI.createImageView({image:"/images/kk.png",width:50,top:5,height:40,right:15,opacity:.3});a.add(s);var d=Ti.UI.createButton({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,title:"Datenbankanfrage",bottom:10,left:10,width:"90%",bubbleParent:!1,height:60});a.add(n),a.add(d);var l={titles:["Hörspieltitel","Autor Vorname","Autor Nachname","Produktion","Regie","Komposition","Übersetzung","Beschreibung (Volltext)","Mitwirkende"],keys:["ti","au.an","au.av","pr","re.an","ko.an","ua.an","ko.an","ua.an","inhv","mit"]};Container4Radiostationen=Ti.UI.createView({top:150,bubbleParent:!1,left:10,right:10,height:Ti.UI.SIZE,layout:"horizontal"});var c=["dlr","dlf","br","orf","srf","hr","mdr","rbb","wdr","rb n","ndr","swr","sr","dw","corax"];c.forEach(function(e){Container4Radiostationen.add(Ti.UI.createImageView({top:5,left:5,borderWidth:1,borderColor:"#eee",opacity:1,horizontalWrap:!0,width:60,height:60,image:"/images/"+e+".png"}))}),a.add(Container4Radiostationen),Container4Radiostationen.addEventListener("click",function(e){e.source.opacity=1==e.source.opacity?.15:1}),s.addEventListener("click",function(e){e.source.opacity=1==e.source.opacity?.15:1}),o.addEventListener("click",function(){var e=Ti.UI.createOptionDialog({selectedIndex:0,options:l.titles});e.show(),e.addEventListener("click",function(e){r.setText(e.source.options[e.index]),i=l.keys[e.index]})}),d.addEventListener("click",t),a.lupe.addEventListener("click",t)};