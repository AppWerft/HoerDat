module.exports=function(e){function t(){if(a.getValue().length<3)return void Ti.UI.createNotification({message:"Das Suchwort sollte mindestens drei Zeichen lang sein. "}).show();i.darker.show(),i.circleProgress.show();var e={col1:r,a:a.getValue()||"Rauschen",so:"autor",soo:"asc"};require("controls/htmlpost.adapter")({payload:e,onprogress:function(e){i.circleProgress.setValue(e)},onerror:function(){Ti.UI.createNotification({message:"Datenbankserver antwortet zu langsam …\n Einfach nochmals losschicken! "}).show(),i.darker.hide(),i.circleProgress.hide()},onload:function(t){var r=[];if(i.darker.hide(),i.circleProgress.hide(),0==t.length)return void Ti.UI.createNotification({message:"Mehr als 100 Datensätze, formulieren Sie Ihre Anfrage bitte etwas genauer. "}).show();var n=Ti.UI.createWindow({data:t,searchItem:e,backgroundColor:"white"});n.open(),n.list=Ti.UI.createTableView(),n.add(n.list),n.data.forEach(function(e){r.push(require("ui/common/row.widget")(e))}),n.list.setData(r),n.list.addEventListener("click",function(e){require("ui/common/sendung.window")(e.rowData.itemId).open()}),n.addEventListener("open",require("ui/common/search.menu"))}})}var i=Ti.UI.createView();i.circleProgress=require("vendor/circularprogress")({percent:0,size:250,margin:10,zIndex:901,progressColor:"#427aa7",topper:{color:"#fff",size:225},font:{visible:!1}}),i.darker=Ti.UI.createView({backgroundColor:"black",opacity:.5,visible:!1,zIndex:900}),e.add(i),e.add(i.darker),e.add(i.circleProgress);var r="ti",n=Ti.UI.createView({top:30,left:15,height:20,width:200,backgroundColor:"#777"});n.add(Ti.UI.createImageView({image:"/images/d.png",width:10,height:10,right:0,bottom:0}));var o=Ti.UI.createLabel({text:"Hörspiel-Titel",color:"white",left:5,touchEnabled:!1,width:Ti.UI.FILL,textAlign:"left"});n.add(o),i.add(n);var a=Ti.UI.createTextField({borderWidth:1,borderColor:"silver",borderRadius:5,color:"#336699",top:60,left:10,hintText:"Suchbegriff",width:"90%",height:40});i.lupe=Ti.UI.createImageView({image:"/images/lupe.png",width:80,top:45,bubbleParent:!1,height:70,right:5}),i.add(i.lupe);var s=Ti.UI.createButton({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,title:"Datenbankanfrage",bottom:10,left:10,width:"90%",bubbleParent:!1,height:60});i.add(a),i.add(s);var l={titles:["Hörspieltitel","Autor Vorname","Autor Nachname","Produktion","Regie","Komposition","Übersetzung","Beschreibung (Volltext)","Mitwirkende"],keys:["ti","au.an","au.av","pr","re.an","ko.an","ua.an","ko.an","ua.an","inhv","mit"]};Container4Radiostationen=Ti.UI.createView({top:150,bubbleParent:!1,left:10,right:10,height:Ti.UI.SIZE,layout:"horizontal"});var d=["dlr","dlf","br","orf","srf","hr","mdr","rbb","wdr","rb n","ndr","swr","sr","dw","corax"];d.forEach(function(e){Container4Radiostationen.add(Ti.UI.createImageView({top:5,left:5,borderWidth:1,borderColor:"#eee",opacity:1,horizontalWrap:!0,width:60,height:60,image:"/images/"+e+".png"}))}),i.add(Container4Radiostationen),Container4Radiostationen.addEventListener("click",function(e){e.source.opacity=1==e.source.opacity?.15:1}),n.addEventListener("click",function(){var e=Ti.UI.createOptionDialog({selectedIndex:0,options:l.titles});e.show(),e.addEventListener("click",function(e){o.setText(e.source.options[e.index]),r=l.keys[e.index]})}),s.addEventListener("click",t),i.lupe.addEventListener("click",t)};